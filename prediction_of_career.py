# In[1]:
import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.naive_bayes import MultinomialNB
from sklearn.metrics import accuracy_score
import json
import difflib
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity
import pandas as pd
import matplotlib.pyplot as plt
import pymongo
import os

# In[2]:

client = pymongo.MongoClient(
    "mongodb+srv://harshil:shanu123@pragati.oeap8sk.mongodb.net/test")
mydb = client["pragati"]
mycol = mydb["growth_rate"]

filcol = mycol.find()

# lisst of skills
skill = ['Accounting',
         'Accounting and analytical software',
         'Accounting and banking software',
         'Accounting software',
         'Active learning',
         'Active listening',
         'Adaptability',
         'Adaptable',
         'Adaptive',
         'Administration',
         'Advanced numeracy',
         'Alertness',
         'Analytical',
         'Analytical and scientific software',
         'Analytical software',
         'Analytical thinking',
         'Analytical-oriented',
         'Anatomy',
         'Approachableness',
         'Arm-hand steadiness',
         'Art and design software',
         'Artistic',
         'Artistic ability',
         'Assertive',
         'Assertiveness',
         'Athleticism',
         'Attention detail',
         'Attention to detail',
         'Auditory attention',
         'Basic math comprehension',
         'Biology',
         'Biology and chemistry',
         'Biology and ecology',
         'Bookkeeping',
         'Budget management',
         'Budgeting',
         'Building and construction',
         'Building and safety codes',
         'Building codes',
         'Business',
         'Business acumen',
         'Business management',
         'Cad software',
         'Calendar and scheduling software',
         'Call centre software',
         'Cataloguing and database software',
         'Chemistry',
         'Chemistry and physics',
         'Cms software',
         'Coaching',
         'Collaboration',
         'Colour vision',
         'Commercial awareness',
         'Commitment',
         'Communication',
         'Communications and media',
         'Compassion',
         'Compassionate',
         'Complex mathematics',
         'Compliance software',
         'Computer',
         'Computer aided design (cad) software',
         'Computer engineering',
         'Computer knowledge',
         'Computer literacy',
         'Computer software',
         'Computer-assisted translation software',
         'Concentration',
         'Confidence',
         'Conflict resolution',
         'Consistent',
         'Contract and import laws',
         'Cooperation',
         'Cooperative',
         'Coordination',
         'Court procedures',
         'Creative',
         'Creative thinking',
         'Creativity',
         'Criminal justice',
         'Critical reasoning',
         'Critical thinking',
         'Crm software',
         'Cultural awareness',
         'Curiosity',
         'Customer service',
         'Customs and environmental regulations',
         'Data and financial analysis software',
         'Data entry',
         'Data-driven',
         'Data-focused',
         'Database and spreadsheet software',
         'Database management software',
         'Database software',
         'Decision making',
         'Decision-making',
         'Dedicated',
         'Dedication',
         'Deductive reasoning',
         'Dependability',
         'Dependable',
         'Design',
         'Design and sewing',
         'Design software',
         'Detail-oriented',
         'Determination',
         'Determined',
         'Dexterity',
         'Dexterous',
         'Digital media',
         'Diplomacy',
         'Discipline',
         'Discretion',
         'Dramatic arts',
         'Economics',
         'Editing',
         'Education and instruction',
         'Education and training',
         'Emotional control',
         'Emotional intelligence',
         'Empathy',
         'Endurance',
         'Energetic',
         'Energy',
         'Engineering',
         'Engineering and technology',
         'English language',
         'English spelling and grammar',
         'Enthusiasm',
         'Environmental laws',
         'Environmental science',
         'Ethical hacking',
         'Etiquette',
         'Facilities management software',
         'Far vision',
         'Film editing equipment',
         'Film editing software',
         'Financial software',
         'Fine arts',
         'Fire safety codes and laws',
         'First aid',
         'Fiscal management',
         'Flexibility',
         'Fluency of ideas',
         'Food production',
         'Food production and safety',
         'Foreign language',
         'Foreign languages',
         'Friendliness',
         'Friendly',
         'Geographical knowledge',
         'Geography',
         'Good eyesight',
         'Good judgment',
         'Good memory',
         'Good vision',
         'Government regulations',
         'Grammar and spelling',
         'Graphics and photo imaging software',
         'Graphics software',
         'Hand-eye coordination',
         'Handle stress',
         'Hearing sensitivity',
         'History and archaeology',
         'History and economics',
         'Honesty',
         'Honesty and integrity',
         'Housing laws',
         'Hr and employment law',
         'Hr software',
         'Improvisation',
         'Independence',
         'Independent',
         'Independent thinking',
         'Inductive reasoning',
         'Industrial control software',
         'Industry regulations and laws',
         'Information ordering',
         'Information retrieval software',
         'Initiative',
         'Innovation',
         'Instructing',
         'Instruction',
         'Instructional',
         'Integrity',
         'Interpersonal',
         'Interpersonal skills',
         'Interviewing',
         'Inventory management software',
         'It skills',
         'Judgement',
         'Judgment',
         'Lab and farm equipment',
         'Law and government',
         'Laws and government',
         'Leadership',
         'Legal databases',
         'Legal knowledge',
         'Listening',
         'Literacy',
         'Logical reasoning',
         'Logical thinking',
         'Management',
         'Management software',
         'Managing',
         'Manual dexterity',
         'Mapping software',
         'Marketing',
         'Marketing software',
         'Mathematical',
         'Mathematical reasoning',
         'Mathematics',
         'Mathematics and accounting',
         'Maths',
         'Mechanical',
         'Mechanical design and repair',
         'Mechanical drawing',
         'Medical software',
         'Medicine',
         'Medicine and dentistry',
         'Memorisation',
         'Mental endurance',
         'Methodical',
         'Methodological',
         'Microbiology',
         'Monitoring',
         'Motivated',
         'Motivation',
         'Motivational',
         'Motivational nature',
         'Multitasking',
         'Music and sound editing software',
         'Music editing software',
         'Musical talent',
         'Navigation',
         'Near vision',
         'Negotiation',
         'Networking',
         'Neuroscience',
         'Neutrality',
         'Notetaking',
         'Numeracy',
         'Numerical',
         'Numerical reasoning',
         'Nutrition',
         'Objectivity',
         'Observation',
         'Observational',
         'Operations analysis',
         'Oral expression',
         'Organisation',
         'Organisational',
         'Originality',
         'Outdoor survival',
         'Passion',
         'Patience',
         'Perseverance',
         'Persistence',
         'Personal responsibility',
         'Personnel and human resources',
         'Persuasion',
         'Physical condition',
         'Physical coordination',
         'Physical fitness',
         'Physical fitness and strength',
         'Physical stamina',
         'Physical strength',
         'Physically fit',
         'Physics',
         'Physiology',
         'Planning',
         'Pos software',
         'Precision',
         'Preparedness',
         'Presentation and conferencing software',
         'Prioritising',
         'Problem sensitivity',
         'Problem solving',
         'Problem-solving',
         'Product knowledge',
         'Production and processing',
         'Professionalism',
         'Program testing software',
         'Programming',
         'Project management',
         'Project management software',
         'Promotional',
         'Psychology',
         'Public safety',
         'Public safety and security',
         'Public speaking',
         'Punctual',
         'Quick thinking',
         'Reading',
         'Reading comprehension',
         'Recipe and menu software',
         'Recordkeeping',
         'Reliability',
         'Research',
         'Researching',
         'Resilience',
         'Resourceful',
         'Resourcefulness',
         'Respectfulness',
         'Responsible',
         'Responsiveness',
         'Rhythm',
         'Risk management',
         'Risk management and assessment',
         'Robustness',
         'Safety management',
         'Safety standards',
         'Safety-conscious',
         'Sales',
         'Sales and marketing',
         'Sales software',
         'Scheduling and database software',
         'Science',
         'Scientific and medical software',
         'Scientific knowledge',
         'Scientific software',
         'Selective attention',
         'Self-confidence',
         'Self-discipline',
         'Self-motivation',
         'Self-sufficiency',
         'Service orientation',
         'Situational awareness',
         'Social awareness',
         'Social media',
         'Social orientation',
         'Social perception',
         'Social perceptiveness',
         'Sociology',
         'Speaking',
         'Speech clarity',
         'Stamina',
         'State and federal regulations',
         'Strategic',
         'Strength',
         'Strength and coordination',
         'Stress tolerance',
         'Supervision',
         'Survival and tactical skills',
         'Swimming',
         'Systems analysis',
         'Tax and spreadsheet software',
         'Tax laws',
         'Teaching',
         'Team member',
         'Team working',
         'Teamwork',
         'Tech savviness',
         'Tech-savviness',
         'Tech-savvy',
         'Technical',
         'Technical aptitude',
         'Technical writing',
         'Telecommunications',
         'Therapy and counselling',
         'Tidiness',
         'Time management',
         'Tolerance',
         'Tour management software',
         'Transcribing',
         'Transcription',
         'Troubleshooting',
         'Trustworthiness',
         'Trustworthy',
         'Typing',
         'Us law',
         'Vigilance',
         'Vision',
         'Visionary',
         'Visual',
         'Visualisation',
         'Webpage design',
         'Word processing',
         'Word processing software',
         'Work well under stress',
         'Workflow software',
         'Writing']


# In[3]:


l2 = []
for x in range(0, len(skill)):
    l2.append(0)


# In[4]:


# list of jobs
jobs = ['Mayor',
        'Advertising Account Executive',
        'Advertising Manager',
        'Petroleum Engineer',
        'Promotions Manager',
        'Dentist',
        'Psychiatrist',
        'Pr Manager',
        'Airline Pilot',
        'Chief Executive',
        'Financial Manager',
        'Lawyer',
        'Green Marketer',
        'Surgeon',
        'Marketing Manager',
        'Compensation Manager',
        'Astronaut',
        'Hr Manager',
        'Broadcast News Analyst',
        'Training & Development Manager',
        'Physicist',
        'Judge',
        'Palaeontologist',
        'Geoscientist',
        'Purchasing Manager',
        'Actuary',
        'Air Traffic Controller',
        'Postsecondary Teacher',
        'Sales Manager',
        'Art Director',
        'Chemical Engineer',
        'Film & Video Editor',
        'Financial Analyst',
        'Systems Software Developer',
        'Astronomer',
        'Administrative Services Manager',
        'Sales Engineer',
        'Director',
        'Producer',
        'Talent Director',
        'Computer Network Architect',
        'Aerospace Engineer',
        'Construction Manager',
        'Veterinarian',
        'Nuclear Engineer',
        'Pharmacist',
        'Logistics Manager',
        'Transportation Manager',
        'Information Security Analyst',
        'Fashion Designer',
        'Musician',
        'Acquisitions Manager',
        'Electrical Engineer',
        'Management Analyst',
        'Singer',
        'Chiropractor',
        'Maritime Pilot',
        'Web Administrator',
        'It Project Manager',
        'Database Architect',
        'Principal',
        'Civil Engineer',
        'Product Safety Engineer',
        'Fitness & Wellness Coordinator',
        'QA Engineer',
        'Intelligence Analyst',
        'Database Administrator',
        'Architect',
        'Aquacultural Manager',
        'Nursery Manager',
        'Mechanical Engineer',
        'Environmental Engineer',
        'Farm Manager',
        'Water Engineer',
        'Computer Programmer',
        'Gaming Manager',
        'Microbiologist',
        'Industrial Engineer',
        'Loan Officer',
        'Actor',
        'Insurance Sales Agent',
        'Web Developer',
        'Animator',
        'Sustainability Specialist',
        'Investment Underwriter',
        'Auditor',
        'Labour Relations Specialist',
        'Accountant',
        'Writer',
        'Occupational Therapist',
        'Market Research Analyst',
        'Food Scientist',
        'Audiologist',
        'Editor',
        'Nuclear Technician',
        'Technical Writer',
        'Urban Planner',
        'Animal Scientist',
        'Landscape Architect',
        'Music Director',
        'Real Estate Sales Agent',
        'Pr Specialist',
        'Midwife',
        'Coroner',
        'Licensing Examiner',
        'Composer',
        'Industrial Designer',
        'Power Plant Operator',
        'Nurse',
        'Customs Inspector',
        'Police Officer',
        'Court Reporter',
        'Retail Buyer',
        'Exhibit Designer',
        'Fine Artist',
        'Zoologist',
        'Athlete',
        'Set Designer',
        'Camera Operator',
        'Surveyor',
        'Lodging Manager',
        'Reporter',
        'Gas Plant Operator',
        'Legislator',
        'Health Educator',
        'Choreographer',
        'Locomotive Engineer',
        'Special Education Teacher',
        'Fundraiser',
        'Archaeologist',
        'Construction & Building Inspector',
        'Fire Investigator',
        'Electronics Engineering Technician',
        'Electrician',
        'Elementary School Teacher',
        'Career Counsellor',
        'Plumber',
        'Interior Designer',
        'Radio & Tv Announcer',
        'Librarian',
        'Middle School Teacher',
        'Food Service Manager',
        'Translator',
        'Robotics Technician',
        'Firefighter',
        'Forester',
        'Graphic Designer',
        'Dietitian',
        'Event Planner',
        'Wind Turbine Service Technician',
        'Dancer',
        'Carpenter',
        'Tax Preparer',
        'Paralegal',
        'Marriage & Family Therapist',
        'Social Worker',
        'Chef',
        'Flight Attendant',
        'Fish & Game Warden',
        'Chemical Technician',
        'Bailiff',
        'Massage Therapist',
        'Sports Coach',
        'Sports Scout',
        'Art Therapist',
        'Correctional Officer',
        'Fitness Trainer',
        'Photographer',
        'Substance Abuse Counsellor',
        'Mental Health Counsellor',
        'Athletic Trainer',
        'Radio Operator',
        'Craft Artist',
        'Automotive Service Technician',
        'Freight Forwarder',
        'Animal Breeder',
        'Community Health Worker',
        'Travel Agent',
        'Machinist',
        'Food Science Technician',
        'Agricultural Technician',
        'Legal Secretary',
        'Rehabilitation Counsellor',
        'Spa Manager',
        'Machine Assembler',
        'Medical Appliance Technician',
        'Skincare Specialist',
        'Roustabout',
        'Umpire',
        'Paramedic',
        'Correspondence Clerk',
        'Information Clerk',
        'Administrative Assistant',
        'Animal Trainer',
        'Patient Representative',
        'Preschool Teacher',
        'Customer Service Representative',
        'Dressmaker',
        'Tailor',
        'Office Clerk',
        'Beautician',
        'File Clerk',
        'Veterinary Technician',
        'Veterinary Technologist',
        'Security Guard',
        'Concierge',
        'Hairdresser',
        'Merchandise Displayer',
        'Tour Guide',
        'Sports Book Writer',
        'Bartender',
        'Retail Salesperson',
        'Telemarketer',
        'Floral Designer',
        'Baker',
        'Laboratory Animal Caretaker',
        'Teller',
        'Veterinary Assistant',
        'Non Farm Animal Caretaker',
        'Lifeguard',
        'Gaming Dealer',
        'Childcare Worker',
        'Nail Technician',
        'Criminal Investigator',
        'Armoured Assault Vehicle Crew',
        'Tutor',
        'Radar & Sonar Operator',
        'Aircrew Member',
        'Artillery & Missile Crew Member',
        'Proofreader',
        'Command & Control Specialist',
        'Wind Energy Engineer',
        'Special Forces Officer',
        'Infantry']


# In[5]:


tr = pd.read_csv("final_dataset.csv")
tr.replace({'jobs': {'Mayor': 0,
                     'Advertising Account Executive': 1,
                     'Advertising Manager': 2,
                     'Petroleum Engineer': 3,
                     'Promotions Manager': 4,
                     'Dentist': 5,
                     'Psychiatrist': 6,
                     'Pr Manager': 7,
                     'Airline Pilot': 8,
                     'Chief Executive': 9,
                     'Financial Manager': 10,
                     'Lawyer': 11,
                     'Green Marketer': 12,
                     'Surgeon': 13,
                     'Marketing Manager': 14,
                     'Compensation Manager': 15,
                     'Astronaut': 16,
                     'Hr Manager': 17,
                     'Broadcast News Analyst': 18,
                     'Training & Development Manager': 19,
                     'Physicist': 20,
                     'Judge': 21,
                     'Palaeontologist': 22,
                     'Geoscientist': 23,
                     'Purchasing Manager': 24,
                     'Actuary': 25,
                     'Air Traffic Controller': 26,
                     'Postsecondary Teacher': 27,
                     'Sales Manager': 28,
                     'Art Director': 29,
                     'Chemical Engineer': 30,
                     'Film & Video Editor': 31,
                     'Financial Analyst': 32,
                     'Systems Software Developer': 33,
                     'Astronomer': 34,
                     'Administrative Services Manager': 35,
                     'Sales Engineer': 36,
                     'Director': 37,
                     'Producer': 38,
                     'Talent Director': 39,
                     'Computer Network Architect': 40,
                     'Aerospace Engineer': 41,
                     'Construction Manager': 42,
                     'Veterinarian': 43,
                     'Nuclear Engineer': 44,
                     'Pharmacist': 45,
                     'Logistics Manager': 46,
                     'Transportation Manager': 47,
                     'Information Security Analyst': 48,
                     'Fashion Designer': 49,
                     'Musician': 50,
                     'Acquisitions Manager': 51,
                     'Electrical Engineer': 52,
                     'Management Analyst': 53,
                     'Singer': 54,
                     'Chiropractor': 55,
                     'Maritime Pilot': 56,
                     'Web Administrator': 57,
                     'It Project Manager': 58,
                     'Database Architect': 59,
                     'Principal': 60,
                     'Civil Engineer': 61,
                     'Product Safety Engineer': 62,
                     'Fitness & Wellness Coordinator': 63,
                     'QA Engineer': 64,
                     'Intelligence Analyst': 65,
                     'Database Administrator': 66,
                     'Architect': 67,
                     'Aquacultural Manager': 68,
                     'Nursery Manager': 69,
                     'Mechanical Engineer': 70,
                     'Environmental Engineer': 71,
                     'Farm Manager': 72,
                     'Water Engineer': 73,
                     'Computer Programmer': 74,
                     'Gaming Manager': 75,
                     'Microbiologist': 76,
                     'Industrial Engineer': 77,
                     'Loan Officer': 78,
                     'Actor': 79,
                     'Insurance Sales Agent': 80,
                     'Web Developer': 81,
                     'Animator': 82,
                     'Sustainability Specialist': 83,
                     'Investment Underwriter': 84,
                     'Auditor': 85,
                     'Labour Relations Specialist': 86,
                     'Accountant': 87,
                     'Writer': 88,
                     'Occupational Therapist': 89,
                     'Market Research Analyst': 90,
                     'Food Scientist': 91,
                     'Audiologist': 92,
                     'Editor': 93,
                     'Nuclear Technician': 94,
                     'Technical Writer': 95,
                     'Urban Planner': 96,
                     'Animal Scientist': 97,
                     'Landscape Architect': 98,
                     'Music Director': 99,
                     'Real Estate Sales Agent': 100,
                     'Pr Specialist': 101,
                     'Midwife': 102,
                     'Coroner': 103,
                     'Licensing Examiner': 104,
                     'Composer': 105,
                     'Industrial Designer': 106,
                     'Power Plant Operator': 107,
                     'Nurse': 108,
                     'Customs Inspector': 109,
                     'Police Officer': 110,
                     'Court Reporter': 111,
                     'Retail Buyer': 112,
                     'Exhibit Designer': 113,
                     'Fine Artist': 114,
                     'Zoologist': 115,
                     'Athlete': 116,
                     'Set Designer': 117,
                     'Camera Operator': 118,
                     'Surveyor': 119,
                     'Lodging Manager': 120,
                     'Reporter': 121,
                     'Gas Plant Operator': 122,
                     'Legislator': 123,
                     'Health Educator': 124,
                     'Choreographer': 125,
                     'Locomotive Engineer': 126,
                     'Special Education Teacher': 127,
                     'Fundraiser': 128,
                     'Archaeologist': 129,
                     'Construction & Building Inspector': 130,
                     'Fire Investigator': 131,
                     'Electronics Engineering Technician': 132,
                     'Electrician': 133,
                     'Elementary School Teacher': 134,
                     'Career Counsellor': 135,
                     'Plumber': 136,
                     'Interior Designer': 137,
                     'Radio & Tv Announcer': 138,
                     'Librarian': 139,
                     'Middle School Teacher': 140,
                     'Food Service Manager': 141,
                     'Translator': 142,
                     'Robotics Technician': 143,
                     'Firefighter': 144,
                     'Forester': 145,
                     'Graphic Designer': 146,
                     'Dietitian': 147,
                     'Event Planner': 148,
                     'Wind Turbine Service Technician': 149,
                     'Dancer': 150,
                     'Carpenter': 151,
                     'Tax Preparer': 152,
                     'Paralegal': 153,
                     'Marriage & Family Therapist': 154,
                     'Social Worker': 155,
                     'Chef': 156,
                     'Flight Attendant': 157,
                     'Fish & Game Warden': 158,
                     'Chemical Technician': 159,
                     'Bailiff': 160,
                     'Massage Therapist': 161,
                     'Sports Coach': 162,
                     'Sports Scout': 163,
                     'Art Therapist': 164,
                     'Correctional Officer': 165,
                     'Fitness Trainer': 166,
                     'Photographer': 167,
                     'Substance Abuse Counsellor': 168,
                     'Mental Health Counsellor': 169,
                     'Athletic Trainer': 170,
                     'Radio Operator': 171,
                     'Craft Artist': 172,
                     'Automotive Service Technician': 173,
                     'Freight Forwarder': 174,
                     'Animal Breeder': 175,
                     'Community Health Worker': 176,
                     'Travel Agent': 177,
                     'Machinist': 178,
                     'Food Science Technician': 179,
                     'Agricultural Technician': 180,
                     'Legal Secretary': 181,
                     'Rehabilitation Counsellor': 182,
                     'Spa Manager': 183,
                     'Machine Assembler': 184,
                     'Medical Appliance Technician': 185,
                     'Skincare Specialist': 186,
                     'Roustabout': 187,
                     'Umpire': 188,
                     'Paramedic': 189,
                     'Correspondence Clerk': 190,
                     'Information Clerk': 191,
                     'Administrative Assistant': 192,
                     'Animal Trainer': 193,
                     'Patient Representative': 194,
                     'Preschool Teacher': 195,
                     'Customer Service Representative': 196,
                     'Dressmaker': 197,
                     'Tailor': 198,
                     'Office Clerk': 199,
                     'Beautician': 200,
                     'File Clerk': 201,
                     'Veterinary Technician': 202,
                     'Veterinary Technologist': 203,
                     'Security Guard': 204,
                     'Concierge': 205,
                     'Hairdresser': 206,
                     'Merchandise Displayer': 207,
                     'Tour Guide': 208,
                     'Sports Book Writer': 209,
                     'Bartender': 210,
                     'Retail Salesperson': 211,
                     'Telemarketer': 212,
                     'Floral Designer': 213,
                     'Baker': 214,
                     'Laboratory Animal Caretaker': 215,
                     'Teller': 216,
                     'Veterinary Assistant': 217,
                     'Non Farm Animal Caretaker': 218,
                     'Lifeguard': 219,
                     'Gaming Dealer': 220,
                     'Childcare Worker': 221,
                     'Nail Technician': 222,
                     'Criminal Investigator': 223,
                     'Armoured Assault Vehicle Crew': 224,
                     'Tutor': 225,
                     'Radar & Sonar Operator': 226,
                     'Aircrew Member': 227,
                     'Artillery & Missile Crew Member': 228,
                     'Proofreader': 229,
                     'Command & Control Specialist': 230,
                     'Wind Energy Engineer': 231,
                     'Special Forces Officer': 232,
                     'Infantry': 233}}, inplace=True)
tr


# In[6]:


df = pd.read_csv("final_dataset.csv")
df.replace({'jobs': {'Mayor': 0,
                     'Advertising Account Executive': 1,
                     'Advertising Manager': 2,
                     'Petroleum Engineer': 3,
                     'Promotions Manager': 4,
                     'Dentist': 5,
                     'Psychiatrist': 6,
                     'Pr Manager': 7,
                     'Airline Pilot': 8,
                     'Chief Executive': 9,
                     'Financial Manager': 10,
                     'Lawyer': 11,
                     'Green Marketer': 12,
                     'Surgeon': 13,
                     'Marketing Manager': 14,
                     'Compensation Manager': 15,
                     'Astronaut': 16,
                     'Hr Manager': 17,
                     'Broadcast News Analyst': 18,
                     'Training & Development Manager': 19,
                     'Physicist': 20,
                     'Judge': 21,
                     'Palaeontologist': 22,
                     'Geoscientist': 23,
                     'Purchasing Manager': 24,
                     'Actuary': 25,
                     'Air Traffic Controller': 26,
                     'Postsecondary Teacher': 27,
                     'Sales Manager': 28,
                     'Art Director': 29,
                     'Chemical Engineer': 30,
                     'Film & Video Editor': 31,
                     'Financial Analyst': 32,
                     'Systems Software Developer': 33,
                     'Astronomer': 34,
                     'Administrative Services Manager': 35,
                     'Sales Engineer': 36,
                     'Director': 37,
                     'Producer': 38,
                     'Talent Director': 39,
                     'Computer Network Architect': 40,
                     'Aerospace Engineer': 41,
                     'Construction Manager': 42,
                     'Veterinarian': 43,
                     'Nuclear Engineer': 44,
                     'Pharmacist': 45,
                     'Logistics Manager': 46,
                     'Transportation Manager': 47,
                     'Information Security Analyst': 48,
                     'Fashion Designer': 49,
                     'Musician': 50,
                     'Acquisitions Manager': 51,
                     'Electrical Engineer': 52,
                     'Management Analyst': 53,
                     'Singer': 54,
                     'Chiropractor': 55,
                     'Maritime Pilot': 56,
                     'Web Administrator': 57,
                     'It Project Manager': 58,
                     'Database Architect': 59,
                     'Principal': 60,
                     'Civil Engineer': 61,
                     'Product Safety Engineer': 62,
                     'Fitness & Wellness Coordinator': 63,
                     'QA Engineer': 64,
                     'Intelligence Analyst': 65,
                     'Database Administrator': 66,
                     'Architect': 67,
                     'Aquacultural Manager': 68,
                     'Nursery Manager': 69,
                     'Mechanical Engineer': 70,
                     'Environmental Engineer': 71,
                     'Farm Manager': 72,
                     'Water Engineer': 73,
                     'Computer Programmer': 74,
                     'Gaming Manager': 75,
                     'Microbiologist': 76,
                     'Industrial Engineer': 77,
                     'Loan Officer': 78,
                     'Actor': 79,
                     'Insurance Sales Agent': 80,
                     'Web Developer': 81,
                     'Animator': 82,
                     'Sustainability Specialist': 83,
                     'Investment Underwriter': 84,
                     'Auditor': 85,
                     'Labour Relations Specialist': 86,
                     'Accountant': 87,
                     'Writer': 88,
                     'Occupational Therapist': 89,
                     'Market Research Analyst': 90,
                     'Food Scientist': 91,
                     'Audiologist': 92,
                     'Editor': 93,
                     'Nuclear Technician': 94,
                     'Technical Writer': 95,
                     'Urban Planner': 96,
                     'Animal Scientist': 97,
                     'Landscape Architect': 98,
                     'Music Director': 99,
                     'Real Estate Sales Agent': 100,
                     'Pr Specialist': 101,
                     'Midwife': 102,
                     'Coroner': 103,
                     'Licensing Examiner': 104,
                     'Composer': 105,
                     'Industrial Designer': 106,
                     'Power Plant Operator': 107,
                     'Nurse': 108,
                     'Customs Inspector': 109,
                     'Police Officer': 110,
                     'Court Reporter': 111,
                     'Retail Buyer': 112,
                     'Exhibit Designer': 113,
                     'Fine Artist': 114,
                     'Zoologist': 115,
                     'Athlete': 116,
                     'Set Designer': 117,
                     'Camera Operator': 118,
                     'Surveyor': 119,
                     'Lodging Manager': 120,
                     'Reporter': 121,
                     'Gas Plant Operator': 122,
                     'Legislator': 123,
                     'Health Educator': 124,
                     'Choreographer': 125,
                     'Locomotive Engineer': 126,
                     'Special Education Teacher': 127,
                     'Fundraiser': 128,
                     'Archaeologist': 129,
                     'Construction & Building Inspector': 130,
                     'Fire Investigator': 131,
                     'Electronics Engineering Technician': 132,
                     'Electrician': 133,
                     'Elementary School Teacher': 134,
                     'Career Counsellor': 135,
                     'Plumber': 136,
                     'Interior Designer': 137,
                     'Radio & Tv Announcer': 138,
                     'Librarian': 139,
                     'Middle School Teacher': 140,
                     'Food Service Manager': 141,
                     'Translator': 142,
                     'Robotics Technician': 143,
                     'Firefighter': 144,
                     'Forester': 145,
                     'Graphic Designer': 146,
                     'Dietitian': 147,
                     'Event Planner': 148,
                     'Wind Turbine Service Technician': 149,
                     'Dancer': 150,
                     'Carpenter': 151,
                     'Tax Preparer': 152,
                     'Paralegal': 153,
                     'Marriage & Family Therapist': 154,
                     'Social Worker': 155,
                     'Chef': 156,
                     'Flight Attendant': 157,
                     'Fish & Game Warden': 158,
                     'Chemical Technician': 159,
                     'Bailiff': 160,
                     'Massage Therapist': 161,
                     'Sports Coach': 162,
                     'Sports Scout': 163,
                     'Art Therapist': 164,
                     'Correctional Officer': 165,
                     'Fitness Trainer': 166,
                     'Photographer': 167,
                     'Substance Abuse Counsellor': 168,
                     'Mental Health Counsellor': 169,
                     'Athletic Trainer': 170,
                     'Radio Operator': 171,
                     'Craft Artist': 172,
                     'Automotive Service Technician': 173,
                     'Freight Forwarder': 174,
                     'Animal Breeder': 175,
                     'Community Health Worker': 176,
                     'Travel Agent': 177,
                     'Machinist': 178,
                     'Food Science Technician': 179,
                     'Agricultural Technician': 180,
                     'Legal Secretary': 181,
                     'Rehabilitation Counsellor': 182,
                     'Spa Manager': 183,
                     'Machine Assembler': 184,
                     'Medical Appliance Technician': 185,
                     'Skincare Specialist': 186,
                     'Roustabout': 187,
                     'Umpire': 188,
                     'Paramedic': 189,
                     'Correspondence Clerk': 190,
                     'Information Clerk': 191,
                     'Administrative Assistant': 192,
                     'Animal Trainer': 193,
                     'Patient Representative': 194,
                     'Preschool Teacher': 195,
                     'Customer Service Representative': 196,
                     'Dressmaker': 197,
                     'Tailor': 198,
                     'Office Clerk': 199,
                     'Beautician': 200,
                     'File Clerk': 201,
                     'Veterinary Technician': 202,
                     'Veterinary Technologist': 203,
                     'Security Guard': 204,
                     'Concierge': 205,
                     'Hairdresser': 206,
                     'Merchandise Displayer': 207,
                     'Tour Guide': 208,
                     'Sports Book Writer': 209,
                     'Bartender': 210,
                     'Retail Salesperson': 211,
                     'Telemarketer': 212,
                     'Floral Designer': 213,
                     'Baker': 214,
                     'Laboratory Animal Caretaker': 215,
                     'Teller': 216,
                     'Veterinary Assistant': 217,
                     'Non Farm Animal Caretaker': 218,
                     'Lifeguard': 219,
                     'Gaming Dealer': 220,
                     'Childcare Worker': 221,
                     'Nail Technician': 222,
                     'Criminal Investigator': 223,
                     'Armoured Assault Vehicle Crew': 224,
                     'Tutor': 225,
                     'Radar & Sonar Operator': 226,
                     'Aircrew Member': 227,
                     'Artillery & Missile Crew Member': 228,
                     'Proofreader': 229,
                     'Command & Control Specialist': 230,
                     'Wind Energy Engineer': 231,
                     'Special Forces Officer': 232,
                     'Infantry': 233}}, inplace=True)


# In[7]:


X = df[skill]
y = df[["jobs"]]
a = np.ravel(y)
a = a[1:]
X = X.iloc[1:]


# In[8]:


X


# In[9]:


a


# In[10]:


f = open('data.json')
data = json.load(f)
# data
li = []
for i in range(0, len(data)):
    sen = ""
    for j in data[i]['skill']:
        sen += j+" "
    li.append(sen)

d = pd.Series(li)
d


# In[11]:


df = df[1:]
vectorizer = TfidfVectorizer()
feature_vectors = vectorizer.fit_transform(df)
# print(feature_vectors)
similarity = cosine_similarity(feature_vectors)
# similarity


# In[12]:


df['index'] = range(1, len(df) + 1)

id = df.pop('index')
df.insert(0, 'index', id)
# df.head()


# In[71]:

res = []
res.append('career')


def prediction(list1, jobs):

    li = []
    model = MultinomialNB()
    model = model.fit(X, a)
    for k in range(0, len(skill)):
        for z in list1:
            if (z == skill[k]):
                l2[k] = 1

    inputtest = [l2]
    predict = model.predict(inputtest)
    predicted = predict[0]
#     print(predicted)
    close_match = difflib.get_close_matches(predicted, jobs)
#     print(close_match)
    j = 0
    i = 0
    for i, j in enumerate(jobs):
        if (j == predicted):
            print('done')
            break
    index = i
    similarity_score = list(enumerate(similarity[index]))

    sort = sorted(similarity_score, key=lambda x: x[1], reverse=True)
    li.append(predicted)
#     print("Career paths for you \n")
    i = 1
    for jobs in sort:
        ind = jobs[0]
    #     print(ind)
        if ind == 0:
            continue
        elif ind > 233:
            continue
        else:
            title = df[df.index == ind]['jobs'].values[0]
            if (i < 5):
                #                 print(i,'.',title)
                li.append(title)
                i += 1
#     li.append(predicted)
    res.append(li)
    return li


# pskills = ['Systems analysis', 'Monitoring', 'Reading comprehension']


def growthRate(str):

    # WRITE CODE FOR PARSING STR TO LIST HERE
    pskills = list(str.split("\n"))
    li = prediction(pskills, jobs)

    df = pd.DataFrame({'Careers': li})

    # compute percentage of each format
    percentage = []
    for z in filcol:
        if (z['job_name'].strip() == df.Careers[0].strip() or z['job_name'].strip() == df.Careers[1].strip() or z['job_name'].strip() == df.Careers[2].strip() or z['job_name'].strip() == df.Careers[3].strip() or z['job_name'].strip() == df.Careers[4].strip()):
            pct = z['job_growth']
            percentage.append(pct)

    for i in range(0, len(percentage)):
        percentage[i] = int(percentage[i])
    percentage.sort()
    # print(percentage)
    df['Percentage'] = percentage

    # depict illustration~
    plt.figure(figsize=(8, 8))
    colors_list = ['Red', 'Orange', 'Blue', 'Purple', 'Yellow']
    graph = plt.bar(li, df['Percentage'], color=colors_list)
    plt.title('The Growth Rate of the top career paths recommended for you')
    #
    i = 0
    for p in graph:
        width = p.get_width()
        height = p.get_height()
        x, y = p.get_xy()
        i += 1
    image = plt.savefig('plotting.png')
    # plt.show()
    img_path = 'plotting.png'
    res.append(img_path)

    return res
    # return image


# result = growthRate('''
# Art and design software
# Artistic
# Artistic ability
# ''')
# print(result)
